{ ... }:
{
  services.komorebi = {
    enable = false;
    config = {
      animation.enabled = false;
      cross_monitor_move_behaviour = "Insert";
      default_workspace_padding = 1;
      default_container_padding = 1;
      global_work_area_offset = {
        top = 30;
        bottom = 30;
        left = 0;
        right = 0;
      };
      border = true;
      border_width = 6;
      border_offset = -6;
      border_radius = 0;
      floating_window_aspect_ratio = "Widescreen";
      floating_layer_behaviour = "Float";
      resize_delta = 100;
      ignore_rules = [ ];
      floating_applications = [ ];
      manage_rules = [ ];
      monitors = [
        {
          wallpaper = {
            path = "${../../wallpaper.heic}";
          };
          workspaces = [
            {
              name = "1";
              layout = "Scrolling";
            }
            {
              name = "2";
              layout = "Scrolling";
            }
            {
              name = "3";
              layout = "Scrolling";
            }
            {
              name = "4";
              layout = "Scrolling";
            }
            {
              name = "5";
              layout = "Scrolling";
            }
            {
              name = "6";
              layout = "Scrolling";
            }
            {
              name = "7";
              layout = "Scrolling";
            }
            {
              name = "8";
              layout = "Scrolling";
            }
          ];
        }
      ];
    };
    applicationSpecificConfiguration = {
      enable = true;
      sources = [
        {
          owner = "LGUG2Z";
          repo = "komorebi-application-specific-configuration";
          rev = "7e53c9e74ba836d6b6b99f8f0b0b74b0abcf0b68";
          path = "applications.mac.json";
          hash = "sha256-6HUT+3HR85ettT5loKRggNLi8mhcnBfmC6asuO4defo=";
        }
      ];

    };
  };

  services.komorebi-bar = {
    enable = false;
    bars = {
      main = {
        config = {
          font_family = "FiraCode Nerd Font";
          monitor = 0;
          height = 30;
          left_widgets = [
            {
              Komorebi = {
                workspaces = {
                  enable = true;
                  hide_empty_workspaces = false;
                };
                layout.enable = true;
                focused_container = {
                  enable = true;
                  show_icon = true;
                };
              };
            }

          ];
          right_widgets = [
            {
              Memory.enable = true;
            }
            {
              Network = {
                enable = true;
                show_activity = true;
                show_total_activity = false;
              };
            }
            {
              Date = {
                enable = true;
                format = "DayDateMonthYear";
              };
            }
            {
              Time = {
                enable = true;
                format = "TwentyFourHour";
              };
            }
          ];

        };

      };
    };
  };

  services.skhd = {
    enable = false;
    skhdConfig = ''
      # Focus windows
      alt - h                 : komorebic focus left
      alt - j                 : komorebic focus down
      alt - k                 : komorebic focus up
      alt - l                 : komorebic focus right
      alt + shift - 0x21      : komorebic cycle-focus previous # 0x21 is [
      alt + shift - 0x1E      : komorebic cycle-focus next # 0x1E is ]

      # Move windows
      alt + shift - h         : komorebic move left
      alt + shift - j         : komorebic move down
      alt + shift - k         : komorebic move up
      alt + shift - l         : komorebic move right
      alt + shift - return    : komorebic promote

      # Stack windows
      ctrl + alt - left       : komorebic stack left
      ctrl + alt - down       : komorebic stack down
      ctrl + alt - up         : komorebic stack up
      ctrl + alt - right      : komorebic stack right
      alt - 0x29              : komorebic unstack # 0x29 is ;
      alt - 0x21              : komorebic cycle-stack previous # 0x21 is [
      alt - 0x1E              : komorebic cycle-stack next # 0x1E is ]

      # Workspace layer
      alt + shift - 0x29      : komorebic toggle-workspace-layer # 0x29 is ;

      # Resize
      alt - 0x18              : komorebic resize-axis horizontal increase # 0x18 is +
      alt - 0x1B              : komorebic resize-axis horizontal decrease # 0x1B is -
      alt + shift - 0x18      : komorebic resize-axis vertical increase
      alt + shift - 0x1B      : komorebic resize-axis vertical decrease

      # Manipulate windows
      alt - t                 : komorebic toggle-float
      alt + shift - t         : komorebic toggle-workspace-float-override
      alt + shift - f         : komorebic toggle-monocle

      # Window manager options
      alt + shift - r         : komorebic retile
      alt - p                 : komorebic toggle-pause
      alt - 0                 : komorebic toggle-window-container-behaviour

      # Layouts
      alt - x                 : komorebic flip-layout horizontal
      alt - y                 : komorebic flip-layout vertical
      alt + shift - x         : komorebic session-float-rule

      # Workspaces
      alt - 1                 : komorebic focus-workspace 0
      alt - 2                 : komorebic focus-workspace 1
      alt - 3                 : komorebic focus-workspace 2
      alt - 4                 : komorebic focus-workspace 3
      alt - 5                 : komorebic focus-workspace 4
      alt - 6                 : komorebic focus-workspace 5
      alt - 7                 : komorebic focus-workspace 6
      alt - 8                 : komorebic focus-workspace 7
      alt - 9                 : komorebic focus-workspace 8

      # Move windows across workspaces
      alt + shift - 1         : komorebic move-to-workspace 0
      alt + shift - 2         : komorebic move-to-workspace 1
      alt + shift - 3         : komorebic move-to-workspace 2
      alt + shift - 4         : komorebic move-to-workspace 3
      alt + shift - 5         : komorebic move-to-workspace 4
      alt + shift - 6         : komorebic move-to-workspace 5
      alt + shift - 7         : komorebic move-to-workspace 6
      alt + shift - 8         : komorebic move-to-workspace 7
      alt + shift - 9         : komorebic move-to-workspace 8
    '';
  };
}
